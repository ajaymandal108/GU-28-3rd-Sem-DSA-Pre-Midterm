#include <stdio.h>

#define MAX 51
#define max(a,b) ((a) > (b) ? (a) : (b))

int main() {
    int L, W, H;
    scanf("%d %d %d", &L, &W, &H);

    static int grid[MAX][MAX][MAX];
    static long long prefix[MAX][MAX][MAX];

    // Read input
    for (int x = 0; x < L; x++)
        for (int y = 0; y < W; y++)
            for (int z = 0; z < H; z++)
                scanf("%d", &grid[x][y][z]);

    // Build 3D prefix sum
    for (int x = 0; x < L; x++) {
        for (int y = 0; y < W; y++) {
            for (int z = 0; z < H; z++) {
                long long val = grid[x][y][z];
                if (x > 0) val += prefix[x-1][y][z];
                if (y > 0) val += prefix[x][y-1][z];
                if (z > 0) val += prefix[x][y][z-1];
                if (x > 0 && y > 0) val -= prefix[x-1][y-1][z];
                if (x > 0 && z > 0) val -= prefix[x-1][y][z-1];
                if (y > 0 && z > 0) val -= prefix[x][y-1][z-1];
                if (x > 0 && y > 0 && z > 0) val += prefix[x-1][y-1][z-1];
                prefix[x][y][z] = val;
            }
        }
    }

    long long maxSum = -1e18;

    // Enumerate all opposite corners
    for (int x1 = 0; x1 < L; x1++) {
        for (int y1 = 0; y1 < W; y1++) {
            for (int z1 = 0; z1 < H; z1++) {
                for (int x2 = x1; x2 < L; x2++) {
                    for (int y2 = y1; y2 < W; y2++) {
                        for (int z2 = z1; z2 < H; z2++) {

                            long long sum = prefix[x2][y2][z2];

                            if (x1 > 0) sum -= prefix[x1-1][y2][z2];
                            if (y1 > 0) sum -= prefix[x2][y1-1][z2];
                            if (z1 > 0) sum -= prefix[x2][y2][z1-1];
                            if (x1 > 0 && y1 > 0) sum += prefix[x1-1][y1-1][z2];
                            if (x1 > 0 && z1 > 0) sum += prefix[x1-1][y2][z1-1];
                            if (y1 > 0 && z1 > 0) sum += prefix[x2][y1-1][z1-1];
                            if (x1 > 0 && y1 > 0 && z1 > 0) sum -= prefix[x1-1][y1-1][z1-1];

                            maxSum = max(maxSum, sum);
                        }
                    }
                }
            }
        }
    }

    printf("%lld\n", maxSum);
    return 0;
}
